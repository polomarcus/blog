<!doctype html><html dir=ltr lang=fr data-theme class="html theme--light"><head><title>Paul Leclercq ğŸ¦•
|
Simplify your tests and development with Docker and Docker Compose
</title><meta charset=utf-8><meta name=generator content="Hugo 0.124.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Paul Leclercq ğŸ¦•"><meta name=description content="A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method."><link rel=stylesheet href=/scss/main.min.dcb3a289d3e45d1bf6770a47f684083c7d402767ab335dd5ebddb39dccfcb69a.css integrity="sha256-3LOiidPkXRv2dwpH9oQIPH1AJ2erM13V692zncz8tpo=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.acec7e43b1395ab1c0fa2623ea862b035c2af2151f2ae2b18a0d32177818a4b6.css integrity="sha256-rOx+Q7E5WrHA+iYj6oYrA1wq8hUfKuKxig0yF3gYpLY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=http://www.epauler.fr/article/simplify-your-tests-and-development-with-docker-and-docker-compose/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script><script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Simplify your tests and development with Docker and Docker Compose"><meta name=twitter:description content="A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method."><meta property="og:title" content="Simplify your tests and development with Docker and Docker Compose"><meta property="og:description" content="A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method."><meta property="og:type" content="article"><meta property="og:url" content="http://www.epauler.fr/article/simplify-your-tests-and-development-with-docker-and-docker-compose/"><meta property="article:section" content="article"><meta property="article:published_time" content="2020-02-17T14:23:42+00:00"><meta property="article:modified_time" content="2020-02-17T14:23:42+00:00"><meta property="og:site_name" content="Paul Leclercq ğŸ¦•"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"article","name":"Simplify your tests and development with Docker and Docker Compose","headline":"Simplify your tests and development with Docker and Docker Compose","alternativeHeadline":"","description":"
      A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method.


    ","inLanguage":"fr","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/www.epauler.fr\/article\/simplify-your-tests-and-development-with-docker-and-docker-compose\/"},"author":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"creator":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"accountablePerson":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"copyrightHolder":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"copyrightYear":"2020","dateCreated":"2020-02-17T14:23:42.73Z","datePublished":"2020-02-17T14:23:42.73Z","dateModified":"2020-02-17T14:23:42.73Z","publisher":{"@type":"Organization","name":"Paul Leclercq ğŸ¦•","url":"http://www.epauler.fr/","logo":{"@type":"ImageObject","url":"http:\/\/www.epauler.fr\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"http:\/\/www.epauler.fr\/article\/simplify-your-tests-and-development-with-docker-and-docker-compose\/","wordCount":"1167","genre":[],"keywords":[]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src="https://avatars.githubusercontent.com/u/4059615?v=4" alt="profile picture"><div class=sidebar__introduction-title><a href=/>Paul Leclercq ğŸ¦•</a></div><div class=sidebar__introduction-description><p>TorrÃ©facteur de data<br><br>"Des nains sur des Ã©paules de gÃ©ants"<br>Bernard de Chartres<br></p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/polomarcus/blog target=_blank rel="noopener me" aria-label=Github title=Github><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.linkedin.com/in/paleclercq/ target=_blank rel="noopener me" aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Copyleft (ğŸ„¯) - CC-BY-SA</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W1N7B2KENY"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W1N7B2KENY")</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Ã‰paulons-nous</a></li><li class=nav__list-item><a href=/article/ title>ğŸ“– Blog</a></li><li class=nav__list-item><a href=/presse/ title>ğŸ“º Presse</a></li><li class=nav__list-item><a href=/mes_ressources/ title>ğŸ”— Mes ressources</a></li><li class=nav__list-item><a href=https://nosgestesclimat.fr/ target=_blank rel="noopener noreferrer" title>ğŸ›¢ï¸ Calculer son empreinte carbone</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Simplify Your Tests and Development With Docker and Docker Compose</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>17/02/2020</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>6 minutes de lecture</span></li></ul><h3 id=scientific-method>Scientific method</h3><p>We tend to forget about it, to be a developer is to be a computer <strong>scientist.</strong> And as scientists, itâ€™s our duty to follow a <a href=https://en.wikipedia.org/wiki/Scientific_method><strong>scientific method</strong></a><strong>.</strong></p><p>Tech community suffer from a toxic mentality about not testing applications, by business pressure or laziness. In the long run, it makes us wasting a <strong>massive</strong> amount of time, and time is money, <a href=https://business.linkedin.com/talent-solutions/blog/trends-and-research/2018/the-3-industries-with-the-highest-turnover-rates>especially when tech companies have a great turnover rate</a> as confirmed in the <a href=https://insights.stackoverflow.com/survey/2019#work-_-how-long-ago-did-developers-last-change-jobs>2019 StackOverflow developer survey</a>.</p><p><img src=https://cdn-images-1.medium.com/max/800/1*QNa4dUoUOxQdBfyT4ykwQQ.png alt></p><p>Itâ€™s a herculean task to take over a project without its original maintainers and without properÂ testsâ€¦</p><p>Without reliable applications developers are considered unable to manage a whole projects. So, for some manager, developers are simple technicians who need constant supervision, whereas with a bit of trust earned thanks to <strong>test, documentation, automation, monitoring and communication</strong>, we can make big things happen. This computer <strong>science</strong> is not all about code, and this can be a bit overwhelmingâ€¦</p><p><img src=https://cdn-images-1.medium.com/max/800/0*lxCCrgY-Ola2OkLK.jpg alt></p><p><a href=http://www.commitstrip.com/en/2017/02/08/where-are-the-tests/>ğŸ˜¥ http://www.commitstrip.com/en/2017/02/08/where-are-the-tests/</a></p><p>Docker and Docker Compose are <strong>tools</strong> to make us more efficient by giving us the possibility to start on our own machine, or somewhere else, any systems in minutes â¡ï¸ <strong>Reproducibility</strong> is a core value of the <a href=https://en.wikipedia.org/wiki/Scientific_method>scientific method</a></p><h3 id=my-daily-tasks-as-a-dataengineer>My daily tasks as a dataÂ engineer</h3><p>Data engineer is a quite new trend since the Big Data area. I like to call myself a backend engineer specialized in distributed systems. The only difference with a developer is you might spend a bit more time in your database/system config files or documentation, one of my running joke is that Iâ€™m not a data engineer but a <strong>configuration engineer.</strong></p><p>I spend most of my days coding, upgrading, or testing open source systems, such as database or message queue to see if they work smoothly together. Also, what I like the most in my job is to help other developersâ€™ to use these systems, that can be new to them, and integrate them to their applications without too much effort <strong>by simplifying the on boarding process.</strong></p><h3 id=avoid-technical-jargon>Avoid technical jargon</h3><p>Itâ€™s important to clarify technical words, we often use them without clearly knowing what we are talking about, <em>sometimes name dropping them to seem smarter than we actually are</em>, and beginners, <em>I consider myself a beginner for many, many technologies,</em> can be scared and assumeÂ :</p><blockquote><p>This is too difficult for me, I wonâ€™t touch it and let it to the pros and Iâ€™ll keep my good olâ€™ 15 line of bash command to update, or not, my system.</p></blockquote><h4 id=containers>Containers</h4><p>Weâ€™ve read this word everywhere for now several years. I like to think about containers as <strong>tiny servers</strong> on your computer. It helps me realized that we donâ€™t have to have a proper dev infrastructure on my favorite cloud platform to run tests.</p><pre tabindex=0><code>docker ps # get all my containers 

$ docker exec -ti my\_container\_name bash # connect to our container

\&gt; ls
</code></pre><p><a href=https://dev.to/aduranil/10-docker-compose-and-docker-commands-that-are-useful-for-active-development-22f9>You can find 10 useful docker commands here</a></p><p>Would you rather have at your disposal a remote server where you need to ask permissions to restart a service or play & destroy service on your own machine? I clearly want to have a full control on my test servers without having to disturb others in case something goes wrong (and it will ğŸ˜„)</p><h4 id=docker-images>Docker images</h4><p>They correspond to the ZIP file I used to download to use a system. You can either use an existing one found on <a href=https://hub.docker.com/r/confluentinc/cp-kafka/>the Docker hub</a>, where you can see configuration details. Or create your own thanks to a <a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/>descriptive file containing all instructions an app needs to run</a></p><h4 id=docker-composehttpsdocsdockercomcomposefiles><a href=https://docs.docker.com/compose/>Docker compose</a>Â files</h4><p>We can run a docker images on a container with a <code>docker run image:version</code> command, but docker compose gives us more control and a human readable file, <em>and as human we prefer that</em> ğŸ˜œ</p><blockquote><p>Compose is a tool for defining and running multi-container Docker applications.</p></blockquote><pre tabindex=0><code>services:  
  zoo1:  
    image: zookeeper:3.4.9 **\# image name found on the docker hub**  
    ports: # link on computer host with the container host  
      - &#34;2181:2181&#34;  
  kafka1:  
    image: confluentinc/cp-kafka:5.2.2  
    ports:  
      - &#34;9092:9092&#34;  
    environment:**#Config goes here as described on the dockerhub page**  
      KAFKA\_ADVERTISED\_LISTENERS: PLAINTEXT://localhost:9092  
      KAFKA\_LOG4J\_ROOT\_LOGLEVEL: &#34;WARN&#34;  
   volumes: **\# we can link on computer data with the container data**  
      - ./../../src/test/testData:/tmp/data  
    depends\_on:  
      - zoo1
</code></pre><p>These docker-compose file when run with a <code>docker-compose up</code> command start 2 services: a <a href=https://zookeeper.apache.org/>Zookeeper</a>, and a <a href=https://kafka.apache.org/>Kafka</a> in a few seconds âœ¨</p><h4 id=it-can-become-data-engineers-and-even-product-owners-bestfriend>It can become data engineers, and even product owners bestÂ friend.</h4><p><img src=https://cdn-images-1.medium.com/max/800/0*SwPF8cytRwniuJTe alt></p><p>Use 11 different systems together can take way toÂ long</p><p><strong>As data engineers</strong>, we have sometimes 11 systems to tests together. And to upgrade these systems, especially with a strict <a href=https://en.wikipedia.org/wiki/Service-level_agreement>Service Level Agreement (SLA)</a> production system, can be stressful. Docker compose forbids us to be lazy, and we can test several tests scenario with different versions and configuration in no time ğŸ˜</p><p><strong>As product owner</strong>, if the development team have a continuous integration systems to publish docker image of their app for each branch, I can validate each change with a Docker (compose) <strong>one liner</strong> found in the readme of the project.</p><h3 id=on-boarding>On boarding</h3><p>Iâ€™ve already heard that Docker Compose commands inside READMEs were great for juniors developers. Well, thatâ€™s true, <strong>but itâ€™s also true for experts</strong>. The hardest part of a project is the on-boarding, if I have to install a new technology, I am sure, <em>because Iâ€™ve installed too many</em>, that I am going to waste 1 hour of my time or more to finally get it right.</p><p><img src=https://cdn-images-1.medium.com/max/800/0*d8i4v4P50JtnyPEE alt></p><p>A +2300 stars project from a top company where you have to installÂ Go</p><p>If youâ€™re wondering why you have only a few contributors to your project, it might be because <strong>itâ€™s too hard to help you.</strong> Try to imagine yourself as if you had to reinstall everything on your computer tomorrow ğŸ˜–</p><h3 id=it-works-on-my-container>â€œIt works on my containerâ€</h3><p>Most continuous integrations systems integrates docker image, at TabMo we use GitLab, where we can run end to end and unit tests thanks to <a href=https://docs.gitlab.com/ee/ci/docker/using_docker_images.html#define-image-and-services-from-gitlab-ciyml>their docker image integration</a></p><pre tabindex=0><code>unit\_test:  
  services:  
    - name: postgres:9.3  
      alias: my\_postgres\_hostname  
  stage: test  
  image: `hseeberger/scala-sbt`  
  script:  
    - sbt clean test  
  variables: `POSTGRES_PASSWORD: example`
</code></pre><p>With only a few lines, our CI can start any database or system, here postgres, in a <a href=http://cloudscaling.com/blog/cloud-computing/the-history-of-pets-vs-cattle/>Cattle VS Pet fashion</a>, for our test. Beautiful and convenient.</p><h3 id=docker-compose-receiptprojects>Docker-compose receiptÂ projects</h3><p>Docker is a rich ecosystem, and Iâ€™m sure you can find some open source projects that will match your needs. For the kakfa ecosystem I strongly recommend <a href=https://github.com/simplesteph/kafka-stack-docker-compose>this repository</a> containing lot of examples on how to run kafka with different configurations</p><p><img src=https://cdn-images-1.medium.com/max/800/0*nRU8w0zf3HCTplGG alt></p><h3 id=for-production>For production?</h3><p>The good news is once youâ€™ve learnt how to use Docker and Docker Compose, itâ€™s a baby step to move to <a href=https://kubernetes.io/>Kubernetes</a> ğŸ‘</p><h3 id=conclusion>Conclusion</h3><p>With Docker and docker compose, we are not lazy anymore to <strong>test hard things</strong>. It increases project quality and its lifetime: <strong>more tests are written</strong>, because itâ€™s easier, we dare more to refactor code.. and itâ€™s almost <strong>0 effort to get started</strong> with any projects, so <strong>more people can contribute</strong> and it makes the project more resilient and <a href=https://en.wikipedia.org/wiki/Bus_factor><strong>pass the bus factor</strong></a></p></div><div class=post__footer></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Copyleft (ğŸ„¯) - CC-BY-SA</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W1N7B2KENY"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W1N7B2KENY")</script></body></html>