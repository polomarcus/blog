<!doctype html><html dir=ltr lang=fr data-theme><head><title>Paul Leclercq ğŸ¦•
|
Simplify your tests and development with Docker and Docker Compose</title><meta charset=utf-8><meta name=generator content="Hugo 0.99.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="
      A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method.


    "><link rel=stylesheet href=/blog/css/main.min.018e997257055746c6ad99bd88839f68148c33b217eea5c99c82d3e384b1a290.css integrity="sha256-AY6ZclcFV0bGrZm9iIOfaBSMM7IX7qXJnILT44SxopA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/blog/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/blog/css/custom.min.2b6cbd91875fbdd95dd9347685a6723e0592e8d9024d6dfd111ee463cb602825.css integrity="sha256-K2y9kYdfvdld2TR2haZyPgWS6NkCTW39ER7kY8tgKCU=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=/blog/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/blog/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/favicons/favicon-16x16.png><link rel=canonical href=https://polomarcus.github.io/blog/article/simplify-your-tests-and-development-with-docker-and-docker-compose/><script type=text/javascript src=/blog/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8=" crossorigin=anonymous></script>
<script type=text/javascript src=/blog/js/anatole-theme-switcher.min.65e936b591bf81484a5ac438c8e4ae6454fb25516d58ce911e4888d7f230bdc5.js integrity="sha256-Zek2tZG/gUhKWsQ4yOSuZFT7JVFtWM6RHkiI1/IwvcU=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Simplify your tests and development with Docker and Docker Compose"><meta name=twitter:description content="A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method."><meta property="og:title" content="Simplify your tests and development with Docker and Docker Compose"><meta property="og:description" content="A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method."><meta property="og:type" content="article"><meta property="og:url" content="https://polomarcus.github.io/blog/article/simplify-your-tests-and-development-with-docker-and-docker-compose/"><meta property="article:section" content="article"><meta property="article:published_time" content="2020-02-17T14:23:42+00:00"><meta property="article:modified_time" content="2020-02-17T14:23:42+00:00"><meta property="og:site_name" content="Paul Leclercq ğŸ¦•"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"article","name":"Simplify your tests and development with Docker and Docker Compose","headline":"Simplify your tests and development with Docker and Docker Compose","alternativeHeadline":"","description":"
      A developer is a computer scientist. And as scientists, itâ€™s our duty to follow a scientific method.


    ","inLanguage":"fr","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/polomarcus.github.io\/blog\/article\/simplify-your-tests-and-development-with-docker-and-docker-compose\/"},"author":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"creator":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"accountablePerson":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"copyrightHolder":{"@type":"Person","name":"Paul Leclercq ğŸ¦•"},"copyrightYear":"2020","dateCreated":"2020-02-17T14:23:42.73Z","datePublished":"2020-02-17T14:23:42.73Z","dateModified":"2020-02-17T14:23:42.73Z","publisher":{"@type":"Organization","name":"Paul Leclercq ğŸ¦•","url":"https://polomarcus.github.io/blog/","logo":{"@type":"ImageObject","url":"https:\/\/polomarcus.github.io\/blog\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/polomarcus.github.io\/blog\/article\/simplify-your-tests-and-development-with-docker-and-docker-compose\/","wordCount":"1167","genre":[],"keywords":[]}</script></head><body><header><div class="page-top
animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><nav><ul class=nav__list id=navMenu><div class=nav__links><li><a href=/blog/ title>Home</a></li><li><a href=/blog/article/ title>Articles</a></li><li><a href=/blog/tags/ title>Categories | Tags</a></li></div><ul><li><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></ul></nav></div></header><div class=wrapper><aside><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=logo-title><div class=title><img src="https://avatars.githubusercontent.com/u/4059615?v=4" alt="profile picture"><h3 title><a href=/blog>Paul Leclercq ğŸ¦•</a></h3><div class=description><p>"Des nains sur des Ã©paules de gÃ©ants" - Bernard de Chartres<br><br>Data, climat, sports, congÃ© paternitÃ©</p></div></div></div><ul class=social-links><li><a href=https://github.com/polomarcus/blog rel=me aria-label=Github title=Github><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://www.linkedin.com/in/paleclercq/ rel=me aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li><a href=https://twitter.com/polomarcus rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li><a href=https://medium.com/@polomarcus rel=me aria-label=Medium title=Medium><i class="fab fa-medium fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer--sidebar"><div class=by_farbox><ul class=footer__list><li class=footer__item>&copy;
Paul Leclercq ğŸ¦•
2022</li></ul></div></footer><script type=text/javascript src=/blog/js/medium-zoom.min.80b0768059c89e2a2180578a3e0e18ede16635e5fedabcccfba6479f60c40bbb.js integrity="sha256-gLB2gFnIniohgFeKPg4Y7eFmNeX+2rzM+6ZHn2DEC7s=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W1N7B2KENY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W1N7B2KENY")</script></div></aside><main><div class=autopagerize_page_element><div class=content><div class="post
animated fadeInDown"><div class=post-content><div class=post-title><h1>Simplify your tests and development with Docker and Docker Compose</h1></div><h3 id=scientific-method>Scientific method</h3><p>We tend to forget about it, to be a developer is to be a computer <strong>scientist.</strong> And as scientists, itâ€™s our duty to follow a <a href=https://en.wikipedia.org/wiki/Scientific_method><strong>scientific method</strong></a><strong>.</strong></p><p>Tech community suffer from a toxic mentality about not testing applications, by business pressure or laziness. In the long run, it makes us wasting a <strong>massive</strong> amount of time, and time is money, <a href=https://business.linkedin.com/talent-solutions/blog/trends-and-research/2018/the-3-industries-with-the-highest-turnover-rates>especially when tech companies have a great turnover rate</a> as confirmed in the <a href=https://insights.stackoverflow.com/survey/2019#work-_-how-long-ago-did-developers-last-change-jobs>2019 StackOverflow developer survey</a>.</p><p><img src=https://cdn-images-1.medium.com/max/800/1*QNa4dUoUOxQdBfyT4ykwQQ.png alt></p><p>Itâ€™s a herculean task to take over a project without its original maintainers and without properÂ testsâ€¦</p><p>Without reliable applications developers are considered unable to manage a whole projects. So, for some manager, developers are simple technicians who need constant supervision, whereas with a bit of trust earned thanks to <strong>test, documentation, automation, monitoring and communication</strong>, we can make big things happen. This computer <strong>science</strong> is not all about code, and this can be a bit overwhelmingâ€¦</p><p><img src=https://cdn-images-1.medium.com/max/800/0*lxCCrgY-Ola2OkLK.jpg alt></p><p><a href=http://www.commitstrip.com/en/2017/02/08/where-are-the-tests/>ğŸ˜¥ http://www.commitstrip.com/en/2017/02/08/where-are-the-tests/</a></p><p>Docker and Docker Compose are <strong>tools</strong> to make us more efficient by giving us the possibility to start on our own machine, or somewhere else, any systems in minutes â¡ï¸ <strong>Reproducibility</strong> is a core value of the <a href=https://en.wikipedia.org/wiki/Scientific_method>scientific method</a></p><h3 id=my-daily-tasks-as-a-dataengineer>My daily tasks as a dataÂ engineer</h3><p>Data engineer is a quite new trend since the Big Data area. I like to call myself a backend engineer specialized in distributed systems. The only difference with a developer is you might spend a bit more time in your database/system config files or documentation, one of my running joke is that Iâ€™m not a data engineer but a <strong>configuration engineer.</strong></p><p>I spend most of my days coding, upgrading, or testing open source systems, such as database or message queue to see if they work smoothly together. Also, what I like the most in my job is to help other developersâ€™ to use these systems, that can be new to them, and integrate them to their applications without too much effort <strong>by simplifying the on boarding process.</strong></p><h3 id=avoid-technical-jargon>Avoid technical jargon</h3><p>Itâ€™s important to clarify technical words, we often use them without clearly knowing what we are talking about, <em>sometimes name dropping them to seem smarter than we actually are</em>, and beginners, <em>I consider myself a beginner for many, many technologies,</em> can be scared and assumeÂ :</p><blockquote><p>This is too difficult for me, I wonâ€™t touch it and let it to the pros and Iâ€™ll keep my good olâ€™ 15 line of bash command to update, or not, my system.</p></blockquote><h4 id=containers>Containers</h4><p>Weâ€™ve read this word everywhere for now several years. I like to think about containers as <strong>tiny servers</strong> on your computer. It helps me realized that we donâ€™t have to have a proper dev infrastructure on my favorite cloud platform to run tests.</p><pre tabindex=0><code>docker ps # get all my containers 

$ docker exec -ti my\_container\_name bash # connect to our container

\&gt; ls
</code></pre><p><a href=https://dev.to/aduranil/10-docker-compose-and-docker-commands-that-are-useful-for-active-development-22f9>You can find 10 useful docker commands here</a></p><p>Would you rather have at your disposal a remote server where you need to ask permissions to restart a service or play & destroy service on your own machine? I clearly want to have a full control on my test servers without having to disturb others in case something goes wrong (and it will ğŸ˜„)</p><h4 id=docker-images>Docker images</h4><p>They correspond to the ZIP file I used to download to use a system. You can either use an existing one found on <a href=https://hub.docker.com/r/confluentinc/cp-kafka/>the Docker hub</a>, where you can see configuration details. Or create your own thanks to a <a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/>descriptive file containing all instructions an app needs to run</a></p><h4 id=docker-composehttpsdocsdockercomcomposefiles><a href=https://docs.docker.com/compose/>Docker compose</a>Â files</h4><p>We can run a docker images on a container with a <code>docker run image:version</code> command, but docker compose gives us more control and a human readable file, <em>and as human we prefer that</em> ğŸ˜œ</p><blockquote><p>Compose is a tool for defining and running multi-container Docker applications.</p></blockquote><pre tabindex=0><code>services:  
  zoo1:  
    image: zookeeper:3.4.9 **\# image name found on the docker hub**  
    ports: # link on computer host with the container host  
      - &#34;2181:2181&#34;  
  kafka1:  
    image: confluentinc/cp-kafka:5.2.2  
    ports:  
      - &#34;9092:9092&#34;  
    environment:**#Config goes here as described on the dockerhub page**  
      KAFKA\_ADVERTISED\_LISTENERS: PLAINTEXT://localhost:9092  
      KAFKA\_LOG4J\_ROOT\_LOGLEVEL: &#34;WARN&#34;  
   volumes: **\# we can link on computer data with the container data**  
      - ./../../src/test/testData:/tmp/data  
    depends\_on:  
      - zoo1
</code></pre><p>These docker-compose file when run with a <code>docker-compose up</code> command start 2 services: a <a href=https://zookeeper.apache.org/>Zookeeper</a>, and a <a href=https://kafka.apache.org/>Kafka</a> in a few seconds âœ¨</p><h4 id=it-can-become-data-engineers-and-even-product-owners-bestfriend>It can become data engineers, and even product owners bestÂ friend.</h4><p><img src=https://cdn-images-1.medium.com/max/800/0*SwPF8cytRwniuJTe alt></p><p>Use 11 different systems together can take way toÂ long</p><p><strong>As data engineers</strong>, we have sometimes 11 systems to tests together. And to upgrade these systems, especially with a strict <a href=https://en.wikipedia.org/wiki/Service-level_agreement>Service Level Agreement (SLA)</a> production system, can be stressful. Docker compose forbids us to be lazy, and we can test several tests scenario with different versions and configuration in no time ğŸ˜</p><p><strong>As product owner</strong>, if the development team have a continuous integration systems to publish docker image of their app for each branch, I can validate each change with a Docker (compose) <strong>one liner</strong> found in the readme of the project.</p><h3 id=on-boarding>On boarding</h3><p>Iâ€™ve already heard that Docker Compose commands inside READMEs were great for juniors developers. Well, thatâ€™s true, <strong>but itâ€™s also true for experts</strong>. The hardest part of a project is the on-boarding, if I have to install a new technology, I am sure, <em>because Iâ€™ve installed too many</em>, that I am going to waste 1 hour of my time or more to finally get it right.</p><p><img src=https://cdn-images-1.medium.com/max/800/0*d8i4v4P50JtnyPEE alt></p><p>A +2300 stars project from a top company where you have to installÂ Go</p><p>If youâ€™re wondering why you have only a few contributors to your project, it might be because <strong>itâ€™s too hard to help you.</strong> Try to imagine yourself as if you had to reinstall everything on your computer tomorrow ğŸ˜–</p><h3 id=it-works-on-my-container>â€œIt works on my containerâ€</h3><p>Most continuous integrations systems integrates docker image, at TabMo we use GitLab, where we can run end to end and unit tests thanks to <a href=https://docs.gitlab.com/ee/ci/docker/using_docker_images.html#define-image-and-services-from-gitlab-ciyml>their docker image integration</a></p><pre tabindex=0><code>unit\_test:  
  services:  
    - name: postgres:9.3  
      alias: my\_postgres\_hostname  
  stage: test  
  image: `hseeberger/scala-sbt`  
  script:  
    - sbt clean test  
  variables: `POSTGRES_PASSWORD: example`
</code></pre><p>With only a few lines, our CI can start any database or system, here postgres, in a <a href=http://cloudscaling.com/blog/cloud-computing/the-history-of-pets-vs-cattle/>Cattle VS Pet fashion</a>, for our test. Beautiful and convenient.</p><h3 id=docker-compose-receiptprojects>Docker-compose receiptÂ projects</h3><p>Docker is a rich ecosystem, and Iâ€™m sure you can find some open source projects that will match your needs. For the kakfa ecosystem I strongly recommend <a href=https://github.com/simplesteph/kafka-stack-docker-compose>this repository</a> containing lot of examples on how to run kafka with different configurations</p><p><img src=https://cdn-images-1.medium.com/max/800/0*nRU8w0zf3HCTplGG alt></p><h3 id=for-production>For production?</h3><p>The good news is once youâ€™ve learnt how to use Docker and Docker Compose, itâ€™s a baby step to move to <a href=https://kubernetes.io/>Kubernetes</a> ğŸ‘</p><h3 id=conclusion>Conclusion</h3><p>With Docker and docker compose, we are not lazy anymore to <strong>test hard things</strong>. It increases project quality and its lifetime: <strong>more tests are written</strong>, because itâ€™s easier, we dare more to refactor code.. and itâ€™s almost <strong>0 effort to get started</strong> with any projects, so <strong>more people can contribute</strong> and it makes the project more resilient and <a href=https://en.wikipedia.org/wiki/Bus_factor><strong>pass the bus factor</strong></a></p></div><div class=post-footer><div class=info></div></div></div></div></div></main></div><footer class="footer footer--base"><div class=by_farbox><ul class=footer__list><li class=footer__item>&copy;
Paul Leclercq ğŸ¦•
2022</li></ul></div></footer><script type=text/javascript src=/blog/js/medium-zoom.min.80b0768059c89e2a2180578a3e0e18ede16635e5fedabcccfba6479f60c40bbb.js integrity="sha256-gLB2gFnIniohgFeKPg4Y7eFmNeX+2rzM+6ZHn2DEC7s=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W1N7B2KENY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W1N7B2KENY")</script></body></html>